import{_ as $}from"./BF3S17LP.js";import{_ as b}from"./DlAUqK2U.js";import{o as l,c as u,a as t,b as i,w as g,d as h,t as m,F as w,n as k,s as T,r as f,A as j,u as D,f as L,q,z as B}from"./Ddsf3_4P.js";import{_ as C}from"./DEWPlR1h.js";import{_ as A}from"./BhKJ-gEf.js";const E={"aria-label":"breadcrumb"},P={class:"breadcrumb mb-4"},F={class:"breadcrumb-item"},M={class:"breadcrumb-item"},O={class:"breadcrumb-item active","aria-current":"page"},Q={__name:"Breadcrumb",props:{productTitle:String},setup(o){return(a,e)=>{const s=$;return l(),u("nav",E,[t("ol",P,[t("li",F,[i(s,{to:"/"},{default:g(()=>e[0]||(e[0]=[h("Home")])),_:1})]),t("li",M,[i(s,{to:"/products"},{default:g(()=>e[1]||(e[1]=[h("Products")])),_:1})]),t("li",O,m(o.productTitle),1)])])}}},z=b(Q,[["__scopeId","data-v-0986a4ce"]]),G={class:"product-detail mb-3 shadow-sm p-3 border"},H={class:"row g-0"},U={class:"col-md-6"},J=["src","alt"],K={class:"col-md-6"},W={class:"product-info d-flex flex-column justify-content-between h-100"},X={class:"product-title mb-3 display-5"},Y={class:"product-description text-muted"},Z={class:"product-price text-primary"},tt={class:"mt-4 quantity-box"},et=["value"],st=["value"],ot={class:"mt-4 d-flex flex-column flex-md-row align-items-center"},nt={__name:"ProductDetail",props:{product:Object,modelValue:Number},setup(o){return(a,e)=>{const s=C,d=$;return l(),u("div",G,[t("div",H,[t("div",U,[t("img",{src:o.product.thumbnail,class:"img-fluid product-image",alt:o.product.title},null,8,J)]),t("div",K,[t("div",W,[t("h1",X,m(o.product.title),1),t("p",Y,m(o.product.description),1),t("h2",Z,"$"+m(o.product.price),1),i(s,{rating:o.product.rating},null,8,["rating"]),t("div",tt,[e[2]||(e[2]=t("label",{for:"quantity",class:"form-label"},"數量:",-1)),t("select",{id:"quantity",class:"form-select",value:o.modelValue,onChange:e[0]||(e[0]=c=>a.$emit("update:modelValue",parseInt(c.target.value,10)))},[(l(),u(w,null,k(10,c=>t("option",{key:c,value:c},m(c),9,st)),64))],40,et)]),t("div",ot,[t("button",{class:"btn btn-outline-dark btn-lg w-100",onClick:e[1]||(e[1]=c=>a.$emit("addToCart",o.product,o.modelValue))},e[3]||(e[3]=[t("i",{class:"bi bi-cart"},null,-1),h("Add to Cart ")])),i(d,{to:"/cart",class:"btn btn-dark btn-lg w-100 text-center mt-2 mt-md-0"},{default:g(()=>e[4]||(e[4]=[t("i",{class:"bi bi-arrow-right-circle me-1"},null,-1),h("Go to Cart ")])),_:1})])])])])])}}},at=b(nt,[["__scopeId","data-v-2f7b2ccd"]]),ct={class:"related-products mt-5"},rt={class:"row gx-4 gy-4 related-product"},lt=["src","alt"],it={class:"card-body d-flex flex-column"},dt={class:"card-title"},ut={class:"card-text text-primary fw-bold"},mt={__name:"RelatedProducts",props:{products:Array},setup(o){const a=()=>{const e=new IntersectionObserver(s=>{s.forEach(d=>{d.isIntersecting&&(d.target.classList.add("fade-in"),e.unobserve(d.target))})},{threshold:.2});document.querySelectorAll(".related-product").forEach(s=>{e.observe(s)})};return T(()=>{a()}),(e,s)=>{const d=A,c=C,p=$;return l(),u("div",ct,[i(d,{title:"Related Products",icon:"bi bi-arrow-right-circle"}),t("div",rt,[(l(!0),u(w,null,k(o.products,r=>(l(),u("div",{key:r.id,class:"col-6 col-sm-6 col-md-4 col-lg-3"},[i(p,{to:`/products/${r.id}`,class:"card h-100 shadow-sm d-flex flex-column"},{default:g(()=>[t("img",{src:r.thumbnail,class:"card-img-top",alt:r.title},null,8,lt),s[0]||(s[0]=t("hr",{class:"my-0"},null,-1)),t("div",it,[t("h5",dt,m(r.title),1),t("p",ut,"$"+m(r.price),1),i(c,{rating:r.rating},null,8,["rating"])]),s[1]||(s[1]=t("div",{class:"view-more-overlay"},[t("span",{class:"view-more-text"},"Learn more")],-1))]),_:2},1032,["to"])]))),128))])])}}},_t=b(mt,[["__scopeId","data-v-c7e71d1e"]]),pt={class:"toast-notification"},vt={class:"toast-content"},ft={__name:"ToastNotification",props:{message:String},setup(o){return(a,e)=>(l(),u("div",pt,[t("div",vt,[e[1]||(e[1]=t("i",{class:"bi bi-check-circle-fill text-success me-2"},null,-1)),t("span",null,m(o.message),1),t("button",{class:"btn-close",onClick:e[0]||(e[0]=s=>a.$emit("close"))})])]))}},bt=b(ft,[["__scopeId","data-v-b8b0001e"]]),gt={key:0,class:"container mt-5 pt-5"},ht={key:1,class:"container mt-5 pt-5"},xt={__name:"[id]",setup(o){const a=f(null),e=f([]),s=j(),d=D(),c=f(1),p=f(!1),r=f(""),y=async()=>{try{const n=await(await fetch(`https://dummyjson.com/products/${s.params.id}`)).json();a.value=n,V(n.category)}catch(_){console.error("Error fetching product:",_)}},V=async _=>{try{const v=await(await fetch(`https://dummyjson.com/products/category/${_}?limit=5`)).json();e.value=v.products.filter(x=>x.id!==a.value.id)}catch(n){console.error("Error fetching related products:",n)}},N=(_,n)=>{const v=parseInt(n,10);d.addToCart({..._,quantity:v}),r.value="已成功加入購物車!",p.value=!0,setTimeout(()=>{p.value=!1},1500)};return T(()=>{y()}),L(s,()=>{y()}),(_,n)=>{const v=z,x=at,I=_t,S=bt;return a.value?(l(),u("div",gt,[i(v,{productTitle:a.value.title},null,8,["productTitle"]),i(x,{product:a.value,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=R=>c.value=R),onAddToCart:N},null,8,["product","modelValue"]),i(I,{products:e.value},null,8,["products"]),p.value?(l(),q(S,{key:0,message:r.value,onClose:n[1]||(n[1]=()=>p.value=!1)},null,8,["message"])):B("",!0)])):(l(),u("div",ht,n[2]||(n[2]=[t("div",{class:"d-flex justify-content-center"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)])))}}},Ct=b(xt,[["__scopeId","data-v-7398d834"]]);export{Ct as default};
