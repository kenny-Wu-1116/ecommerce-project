import{_ as $}from"./BS5O6h7c.js";import{_ as b}from"./DlAUqK2U.js";import{o as l,c as u,a as t,b as i,w as g,d as h,t as _,F as w,n as T,s as k,r as f,A as j,u as D,f as L,q,z as B}from"./BiSt4jvn.js";import{_ as C}from"./CcRsR9ZF.js";import{_ as A}from"./D0wt91eU.js";const E={"aria-label":"breadcrumb"},P={class:"breadcrumb mb-4"},G={class:"breadcrumb-item"},F={class:"breadcrumb-item"},M={class:"breadcrumb-item active","aria-current":"page"},O={__name:"Breadcrumb",props:{productTitle:String},setup(s){return(a,o)=>{const e=$;return l(),u("nav",E,[t("ol",P,[t("li",G,[i(e,{to:"/"},{default:g(()=>o[0]||(o[0]=[h("Home")])),_:1})]),t("li",F,[i(e,{to:"/products"},{default:g(()=>o[1]||(o[1]=[h("Products")])),_:1})]),t("li",M,_(s.productTitle),1)])])}}},Q=b(O,[["__scopeId","data-v-6ee5d9c4"]]),z={class:"product-detail mb-3 shadow-sm p-3 border"},H={class:"row g-0"},U={class:"col-md-6"},J=["src","alt"],K={class:"col-md-6"},W={class:"product-info d-flex flex-column justify-content-between h-100"},X={class:"product-title mb-3 display-5"},Y={class:"product-description text-muted"},Z={class:"product-price text-primary"},tt={class:"mt-4 quantity-box"},ot=["value"],et=["value"],st={class:"mt-4 d-flex flex-column flex-md-row align-items-center"},nt={__name:"ProductDetail",props:{product:Object,modelValue:Number},setup(s){return(a,o)=>{const e=C,d=$;return l(),u("div",z,[t("div",H,[t("div",U,[t("img",{src:s.product.thumbnail,class:"img-fluid product-image",alt:s.product.title},null,8,J)]),t("div",K,[t("div",W,[t("h1",X,_(s.product.title),1),t("p",Y,_(s.product.description),1),t("h2",Z,"$"+_(s.product.price),1),i(e,{rating:s.product.rating},null,8,["rating"]),t("div",tt,[o[2]||(o[2]=t("label",{for:"quantity",class:"form-label"},"數量:",-1)),t("select",{id:"quantity",class:"form-select",value:s.modelValue,onChange:o[0]||(o[0]=c=>a.$emit("update:modelValue",parseInt(c.target.value,10)))},[(l(),u(w,null,T(10,c=>t("option",{key:c,value:c},_(c),9,et)),64))],40,ot)]),t("div",st,[t("button",{class:"btn btn-outline-dark btn-lg w-100",onClick:o[1]||(o[1]=c=>a.$emit("addToCart",s.product,s.modelValue))},o[3]||(o[3]=[t("i",{class:"bi bi-cart"},null,-1),h("Add to Cart ")])),i(d,{to:"/cart",class:"btn btn-dark btn-lg w-100 text-center mt-2 mt-md-0"},{default:g(()=>o[4]||(o[4]=[t("i",{class:"bi bi-arrow-right-circle me-1"},null,-1),h("Go to Cart ")])),_:1})])])])])])}}},at=b(nt,[["__scopeId","data-v-30335f74"]]),ct={class:"related-products mt-5"},rt={class:"row gx-4 gy-4 related-product"},lt=["src","alt"],it={class:"card-body d-flex flex-column"},dt={class:"card-title"},ut={class:"card-text text-primary fw-bold"},mt={__name:"RelatedProducts",props:{products:Array},setup(s){const a=()=>{const o=new IntersectionObserver(e=>{e.forEach(d=>{d.isIntersecting&&(d.target.classList.add("fade-in"),o.unobserve(d.target))})},{threshold:.2});document.querySelectorAll(".related-product").forEach(e=>{o.observe(e)})};return k(()=>{a()}),(o,e)=>{const d=A,c=C,p=$;return l(),u("div",ct,[i(d,{title:"Related Products",icon:"bi bi-arrow-right-circle"}),t("div",rt,[(l(!0),u(w,null,T(s.products,r=>(l(),u("div",{key:r.id,class:"col-6 col-sm-6 col-md-4 col-lg-3"},[i(p,{to:`/products/${r.id}`,class:"card h-100 shadow-sm d-flex flex-column"},{default:g(()=>[t("img",{src:r.thumbnail,class:"card-img-top",alt:r.title},null,8,lt),e[0]||(e[0]=t("hr",{class:"my-0"},null,-1)),t("div",it,[t("h5",dt,_(r.title),1),t("p",ut,"$"+_(r.price),1),i(c,{rating:r.rating},null,8,["rating"])]),e[1]||(e[1]=t("div",{class:"view-more-overlay"},[t("span",{class:"view-more-text"},"Learn more")],-1))]),_:2},1032,["to"])]))),128))])])}}},_t=b(mt,[["__scopeId","data-v-c7e71d1e"]]),pt={class:"toast-notification"},vt={class:"toast-content"},ft={__name:"ToastNotification",props:{message:String},setup(s){return(a,o)=>(l(),u("div",pt,[t("div",vt,[o[1]||(o[1]=t("i",{class:"bi bi-check-circle-fill text-success me-2"},null,-1)),t("span",null,_(s.message),1),t("button",{class:"btn-close",onClick:o[0]||(o[0]=e=>a.$emit("close"))})])]))}},bt=b(ft,[["__scopeId","data-v-b8b0001e"]]),gt={key:0,class:"container mt-5 pt-5"},ht={key:1,class:"container mt-5 pt-5"},xt={__name:"[id]",setup(s){const a=f(null),o=f([]),e=j(),d=D(),c=f(1),p=f(!1),r=f(""),y=async()=>{try{const n=await(await fetch(`https://dummyjson.com/products/${e.params.id}`)).json();a.value=n,V(n.category)}catch(m){console.error("Error fetching product:",m)}},V=async m=>{try{const v=await(await fetch(`https://dummyjson.com/products/category/${m}?limit=5`)).json();o.value=v.products.filter(x=>x.id!==a.value.id)}catch(n){console.error("Error fetching related products:",n)}},N=(m,n)=>{const v=parseInt(n,10);d.addToCart({...m,quantity:v}),r.value="已成功加入購物車!",p.value=!0,setTimeout(()=>{p.value=!1},1500)};return k(()=>{y()}),L(e,()=>{y()}),(m,n)=>{const v=Q,x=at,I=_t,S=bt;return a.value?(l(),u("div",gt,[i(v,{productTitle:a.value.title},null,8,["productTitle"]),i(x,{product:a.value,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=R=>c.value=R),onAddToCart:N,onGoToCart:m.goToCart},null,8,["product","modelValue","onGoToCart"]),i(I,{products:o.value},null,8,["products"]),p.value?(l(),q(S,{key:0,message:r.value,onClose:n[1]||(n[1]=()=>p.value=!1)},null,8,["message"])):B("",!0)])):(l(),u("div",ht,n[2]||(n[2]=[t("div",{class:"d-flex justify-content-center"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)])))}}},Ct=b(xt,[["__scopeId","data-v-c245dcc9"]]);export{Ct as default};
