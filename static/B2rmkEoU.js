import{_ as $}from"./BTGKj8xd.js";import{_ as p}from"./DlAUqK2U.js";import{o as r,c as d,a as t,b as l,w as f,d as v,t as m,F as y,n as w,s as k,z as I,u as D,r as x,f as L,p as _,q as R,A as q}from"./8YMvs2PV.js";import{_ as T,u as B}from"./BJyAVtCw.js";import{_ as A}from"./D9eTfzOx.js";const P={"aria-label":"breadcrumb"},j={class:"breadcrumb mb-4"},E={class:"breadcrumb-item"},F={class:"breadcrumb-item"},M={class:"breadcrumb-item active","aria-current":"page"},O={__name:"Breadcrumb",props:{productTitle:String},setup(o){return(a,e)=>{const s=$;return r(),d("nav",P,[t("ol",j,[t("li",E,[l(s,{to:"/"},{default:f(()=>e[0]||(e[0]=[v("Home")])),_:1})]),t("li",F,[l(s,{to:"/products"},{default:f(()=>e[1]||(e[1]=[v("Products")])),_:1})]),t("li",M,m(o.productTitle),1)])])}}},Q=p(O,[["__scopeId","data-v-0986a4ce"]]),z={class:"product-detail mb-3 shadow-sm p-3 border"},G={class:"row g-0"},H={class:"col-md-6"},U=["src","alt"],J={class:"col-md-6"},K={class:"product-info d-flex flex-column justify-content-between h-100"},W={class:"product-title mb-3 display-5"},X={class:"product-description text-muted"},Y={class:"product-price text-primary"},Z={class:"mt-4 quantity-box"},tt=["value"],et=["value"],st={class:"mt-4 d-flex flex-column flex-md-row align-items-center"},ot={__name:"ProductDetail",props:{product:Object,modelValue:Number},setup(o){return(a,e)=>{const s=T,c=$;return r(),d("div",z,[t("div",G,[t("div",H,[t("img",{src:o.product.thumbnail,class:"img-fluid product-image",alt:o.product.title},null,8,U)]),t("div",J,[t("div",K,[t("h1",W,m(o.product.title),1),t("p",X,m(o.product.description),1),t("h2",Y,"$"+m(o.product.price),1),l(s,{rating:o.product.rating},null,8,["rating"]),t("div",Z,[e[2]||(e[2]=t("label",{for:"quantity",class:"form-label"},"數量:",-1)),t("select",{id:"quantity",class:"form-select",value:o.modelValue,onChange:e[0]||(e[0]=n=>a.$emit("update:modelValue",parseInt(n.target.value,10)))},[(r(),d(y,null,w(10,n=>t("option",{key:n,value:n},m(n),9,et)),64))],40,tt)]),t("div",st,[t("button",{class:"btn btn-outline-dark btn-lg w-100",onClick:e[1]||(e[1]=n=>a.$emit("addToCart",o.product,o.modelValue))},e[3]||(e[3]=[t("i",{class:"bi bi-cart"},null,-1),v("Add to Cart ")])),l(c,{to:"/cart",class:"btn btn-dark btn-lg w-100 text-center mt-2 mt-md-0"},{default:f(()=>e[4]||(e[4]=[t("i",{class:"bi bi-arrow-right-circle me-1"},null,-1),v("Go to Cart ")])),_:1})])])])])])}}},nt=p(ot,[["__scopeId","data-v-2f7b2ccd"]]),at={class:"related-products mt-5"},ct={class:"row gx-4 gy-4 related-product"},rt=["src","alt"],lt={class:"card-body d-flex flex-column"},it={class:"card-title"},dt={class:"card-text text-primary fw-bold"},ut={__name:"RelatedProducts",props:{products:Array},setup(o){const a=()=>{const e=new IntersectionObserver(s=>{s.forEach(c=>{c.isIntersecting&&(c.target.classList.add("fade-in"),e.unobserve(c.target))})},{threshold:.2});document.querySelectorAll(".related-product").forEach(s=>{e.observe(s)})};return k(()=>{a()}),(e,s)=>{const c=A,n=T,b=$;return r(),d("div",at,[l(c,{title:"Related Products",icon:"bi bi-arrow-right-circle"}),t("div",ct,[(r(!0),d(y,null,w(o.products,i=>(r(),d("div",{key:i.id,class:"col-6 col-sm-6 col-md-4 col-lg-3"},[l(b,{to:`/products/${i.id}`,class:"card h-100 shadow-sm d-flex flex-column"},{default:f(()=>[t("img",{src:i.thumbnail,class:"card-img-top",alt:i.title},null,8,rt),s[0]||(s[0]=t("hr",{class:"my-0"},null,-1)),t("div",lt,[t("h5",it,m(i.title),1),t("p",dt,"$"+m(i.price),1),l(n,{rating:i.rating},null,8,["rating"])]),s[1]||(s[1]=t("div",{class:"view-more-overlay"},[t("span",{class:"view-more-text"},"Learn more")],-1))]),_:2},1032,["to"])]))),128))])])}}},mt=p(ut,[["__scopeId","data-v-c7e71d1e"]]),_t={class:"toast-notification"},pt={class:"toast-content"},bt={__name:"ToastNotification",props:{message:String},setup(o){return(a,e)=>(r(),d("div",_t,[t("div",pt,[e[1]||(e[1]=t("i",{class:"bi bi-check-circle-fill text-success me-2"},null,-1)),t("span",null,m(o.message),1),t("button",{class:"btn-close",onClick:e[0]||(e[0]=s=>a.$emit("close"))})])]))}},ft=p(bt,[["__scopeId","data-v-b8b0001e"]]),vt={key:0,class:"container mt-5 pt-5"},gt={key:1,class:"container mt-5 pt-5"},xt={__name:"[id]",setup(o){const a=I(),e=D(),s=B(),c=x(1),n=x(!1),b=x(""),i=(h,u)=>{const g=parseInt(u,10);e.addToCart({...h,quantity:g}),b.value="已成功加入購物車!",n.value=!0,setTimeout(()=>{n.value=!1},1500)};return k(()=>{s.fetchProduct(a.params.id)}),L(a,()=>{s.fetchProduct(a.params.id)}),(h,u)=>{const g=Q,C=nt,S=mt,V=ft;return!_(s).loading&&_(s).product?(r(),d("div",vt,[l(g,{productTitle:_(s).product.title},null,8,["productTitle"]),l(C,{product:_(s).product,modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=N=>c.value=N),onAddToCart:i},null,8,["product","modelValue"]),l(S,{products:_(s).relatedProducts},null,8,["products"]),n.value?(r(),R(V,{key:0,message:b.value,onClose:u[1]||(u[1]=()=>n.value=!1)},null,8,["message"])):q("",!0)])):(r(),d("div",gt,u[2]||(u[2]=[t("div",{class:"d-flex justify-content-center"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)])))}}},Tt=p(xt,[["__scopeId","data-v-5e9420dd"]]);export{Tt as default};
